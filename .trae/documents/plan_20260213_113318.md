# 实现一键包和阿里API调用方式

## 功能分析

用户希望将应用做成一键包，具有以下特点：
1. 初次运行自动下载依赖
2. API Key在被调用端以阿里API调用的方式被调用，确保通用性

## 实现计划

### 1. 创建启动脚本

- 创建`start.py`启动脚本，实现以下功能：
  - 检查Python环境
  - 检查并安装必要的依赖（flask, customtkinter, requests）
  - 启动主应用

### 2. 修改API服务端实现

- 修改`create_api_app`方法，使其符合阿里API调用规范：
  - 调整请求格式，支持阿里API的参数格式
  - 调整响应格式，返回阿里API标准的JSON结构
  - 确保认证机制兼容阿里API的调用方式

### 3. 配置文件优化

- 创建`config.ini`配置文件，集中管理应用配置
- 支持通过配置文件设置API服务端口、默认模型等

### 4. 打包配置

- 创建`requirements.txt`文件，列出所有依赖
- 提供打包说明，指导用户如何创建可执行文件（如使用pyinstaller）

### 5. 测试和验证

- 测试启动脚本的自动依赖安装功能
- 测试API服务的阿里API调用方式兼容性
- 验证整个一键包的使用流程

## 技术实现要点

- 使用`subprocess`模块执行pip命令安装依赖
- 参考阿里API的标准规范调整API服务实现
- 保持代码的模块化和可维护性
- 确保与现有功能的兼容性

## 预期效果

用户将能够：
1. 直接运行启动脚本，无需手动安装依赖
2. 使用符合阿里API规范的方式调用应用的API服务
3. 享受与之前相同的用户体验

## 实现步骤

1. 创建启动脚本`start.py`
2. 修改API服务端实现，支持阿里API调用方式
3. 创建配置文件和依赖文件
4. 测试整个实现流程
5. 提供使用说明